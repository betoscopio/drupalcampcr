<!doctype html>
<html lang="es">

	<head>
		<meta charset="utf-8">

		<title>Actualiza tu Web Stack</title>

		<meta name="description" content="Una historia del por qué actualizar tu webstack">
		<meta name="author" content="Beto Arancibia">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section  data-background="images/casettes.jpg" data-background-size="40%" data-background-color="#000000">
					<div style="background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px;">
					<h1>Actualiza tu Web Stack</h1>
					<!--h3>The HTML Presentation Framework</h3-->
					<p>
						<small><a href="http://hakim.se">Beto Arancibia</a> / <a href="http://twitter.com/betoscopio">@betoscopio</a></small>
					</p>
					<p>
						<small>Drupal Camp Costa Rica, 31 de Julio de 2015</small>
					</p>
					</div>
				
				</section>

				<section>
					<h2>¿Quién es?</h2>
					<p><small>@betoscopio</small></p>
					<p>
					<img width="100%" height="" data-src="images/santiago_mountains.jpg" alt="montañas Santiago de Chile">
					</p>
				</section>

				<section>
					<h2>Disclaimer</h2>
				</section>

				<section>
					<h2>Web Stack?</h2>
					<p class="fragment">PHP</p>
					<p class="fragment" style="font-size: 1.4em">MySQL</p>
					<p class="fragment" style="font-size: 1.9em">Apache</p>
					<p class="fragment" style="font-size: 2.7em">Linux</p>
					
					<aside class="notes">
						This slide has fragments which are also stepped through in the notes window.
					</aside>
				</section>

				<section>
					<h2>¿Hace cuanto?</h2>
				</section>


				<section>
					<h2>Hay un mundo allá afuera...</h2>
				</section>

				<section>
					<h2>La herramienta apropiada para cada problema</h2>
					<img width="" height="" data-src="images/wrong-tool-pizza.jpg" alt="Wrong tool pizza">
				</section>

				<section>
					<h2>¿Es LAMP la mejor solución para todo proyecto PHP?</h2>
				</section>

				<section>
					<h2>¿Alernativas?</h2>
				</section>

				<section>
					<h2>LEMP</h2>
					<p class="fragment">PHP</p>
					<p class="fragment" style="font-size: 1.4em">MariaDB</p>
					<p class="fragment" style="font-size: 1.9em">Nginx</p>
					<p class="fragment" style="font-size: 2.7em">Linux</p>
				</section>
						
				<section>
					<section>
						<h2>PHP</h2>
						<p>¿Qué versión usas?</p>

						<p><small><a href="http://php.net/supported-versions.php">http://php.net/supported-versions.php</a></small></p>
					</section>

					<section>
						<h2>Menor a 5.3?</h2>

						<p class="fragment">PHP 5.2 EOL:</p>
						<p class="fragment">6 Jan 2011, 4 years, 6 months ago</p>
					</section>

					<section>
						<h2>PHP 5.3</h2>
						<ul>
							<li>Namespaces</li>
							<li>Funciones anónimas (closures)</li>
						</ul>	

						<p class="fragment highlight-blue">PHP 5.3.29 EOL, 14 Aug 2014, 11 months ago</p>
					</section>

					<section>
						<h2>PHP 5.4</h2>
						<ul>
							<li class="fragment">Manejo de peticiones FastCGI</li>
							<li class="fragment">Traits</li>
							<li class="fragment">Sintaxis corta para manejo de arrays</li>
							<li class="fragment">Mejor manejo de memoria</li>
							<li class="fragment">Grandes mejoras en rendimiento</li>
							<li class="fragment">Servidor web incorporado</li>
						</ul>
						<p>
						   <span class="fragment"><pre><code>
$ php -S localhost:8000 [-t dir/]
						</code></pre></span></p>

					</section>

					<section>
						<h2>PHP 5.4</h2>
						<ul>
							<li class="fragment">Sin soporte activo hace 10 meses</li>
							<li class="fragment">Soporte de seguridad hasta 14 Sep 2015</li>
							
							<p class="fragment"><small><a href="https://www.drupal.org/node/1498574">https://www.drupal.org/node/1498574</a></small></p>
						</ul>	


					</section>

					<section>
						<h2>PHP 5.5</h2>
						<ul>
							<li class="fragment">Opcode cache incorporado</li>
							<li class="fragment">Mejoras en manejo de excepciones</li>
							<li class="fragment">Deploys atómicos</li>							
						</ul>	

						<p class="fragment"><small><a href="http://php.net/manual/en/migration55.new-features.php">http://php.net/manual/en/migration55.new-features.php</a></small></p>
					</section>

					<section>
						<h2>PHP 5.5</h2>
						<ul>
							<li class="fragment">Sin soporte activo hace 21 días</li>
							<li class="fragment">Soporte de seguridad hasta 10 Jul 2016</li>
						</ul>	
					</section>

					<section>
						<h2>PHP 5.6</h2>
						<ul>
							<li class="fragment">Se incluye PHP debugger (phpdbg)</li>
							<li class="fragment">Constant Scalar Expressions</li>
							<li class="fragment">Operador para manejo de argumentos: ...</li>
							<li class="fragment">Operador exponencial: **</li>
							<li class="fragment">Posible subir archivos mayores a 2Gb</li>
						</ul>	

						<p class="fragment"><small><a href="http://php.net/manual/en/migration56.new-features.php">http://php.net/manual/en/migration56.new-features.php</a></small></p>
					</section>

					<section>
						<h2>PHP 5.6</h2>
						<ul>
							<li class="fragment">Soporte activo hasta 28 de Agosto de 2016</li>
							<li class="fragment">Soporte de seguridad hasta 28 de Agosto de 2017</li>
						</ul>	
					</section>

					<section>
						<h2>Otras versiones?</h2>
						<p  class="fragment">PHP NG</p>
						<p  class="fragment"><a href="https://wiki.php.net/phpng">PHP NG → PHP 7</a></p>
						<p  class="fragment"><a href="http://php.net/archive/2015.php#id2015-07-24-1">24 de Julio de 2015, PHP 7.0.0 Beta 2</a></p>	
					</section>

					<section>
						<h2>Muchas razones para cambiar...</h2>
						<img width="" height="" data-src="images/php-versions2.png" alt="PHP versions performance">
					</section>

					<section>
						<h2>Es tiempo de actualizar</h2>
						<ul>
							<li>5.2 → 5.3: <a href="http://php.net/migration53">http://php.net/migration53</a></li>
							<li>5.3 → 5.4: <a href="http://php.net/migration54">http://php.net/migration54</a></li>
							<li>5.4 → 5.5: <a href="http://php.net/migration55">http://php.net/migration55</a></li>
							<li>5.5 → 5.6: <a href="http://php.net/migration56">http://php.net/migration56</a></li>
						</ul>	
					</section>
				</section>

				<section>
					<h2>Pero mi Shared Host no soporta...</h2>
				</section>

				<section  data-background="images/yaoming.jpg" data-background-size="45%" data-background-color="#ffffff">
					
				</section>

				<section data-background="#ffffff">
					<p>
					<img width="300" height="" data-src="images/aws-logo-large.png" alt="AWS">
					<img width="200" height="" data-src="images/digitalocean.png" alt="Digital Ocean">
					<img width="200" height="" data-src="images/gcplogo.jpg" alt="GCP">
					<img width="300" height="" data-src="images/Rackspace_Cloud.jpg" alt="Rack Space">
					</p>		
				</section>

				<section>
					<section>
						<h2 style="text-style: none">MariaDB</h2>
						<blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;...they have no love for open source, working with the community, or MySQL in general.&rdquo;
						</blockquote>
						<p class="fragment"><small>Monty Widenius</small></p>
					</section>

					<section>
						<h2 style="text-style: none">MariaDB</h2>
						<p>Algo de historia:</p>
						<ul>
							<li class="fragment">2008: MySQL AB es vendido a SUN Microsystems</li>
							<li class="fragment">2009: MySQL es vendido a ORACLE</li>
							<li class="fragment"><strong>2009:</strong>  y el desarrollo de MySQL?</li>
							<li class="fragment">Casi todos los desarrolladores originales de MySQL trabajan ahora en MariaDB.</li>
						</ul>	
					</section>

					<section>
						<h2>Hacking Business Model</h2>
						<ul>
							<li class="fragment">Monty Program AB</li>
							<li class="fragment"><a href="https://mariadb.com/about">https://mariadb.com/about</a></li>
							<li class="fragment"><a href="http://www.forbes.com/sites/reuvencohen/2012/07/25/the-hacking-business-model/">http://www.forbes.com/sites/reuvencohen/2012/07/25/the-hacking-business-model/</a></li>						
						</ul>	
					</section>

					<section>
						<h2 style="text-style: none">MariaDB</h2>
						<ul>
							<li class="fragment">Fork de MySQL, con la intención de mantener un proyecto guiado por la comunidad.</li>
							<li class="fragment">Primer release 22 de enero de 2009</li>
							<li class="fragment">Liderado por autores originales de MySQL</li>
							<li class="fragment">Un objetivo principal es mantener binaria con MySQL, APIs y comandos</li>
						</ul>	
					</section>

					<section>
						<h2>Algunas características técnicas</h2>
						<ul>
							<li class="fragment">Nuevo motor de almacenamiento XtraDB como reemplazo a InnoDB.</li>
							<li class="fragment">Nuevo motor de almacenamiento Aria para motores transaccional y no transaccional. (WIP)</li>
							<li class="fragment">Hasta la versión 5.5 seguía el número de versión de MySql.</li>
							<li class="fragment">Diferenciaciones en nuevas versiones 10 en adelante.</li>
							<li class="fragment">No se importan todas las características de de MySQL 5.6</li>
						</ul>	
					</section>

					<section>
						<h2>Quién lo usa?</h2>
						<ul>
							<li>Arch Linux (default).</li>
							<li>Fedora, RHEL (default</li>
							<li>OpenSUSE (default)</li>
							<li>Slackware (default)</li>
							<li>SUSE (default)</li>
							<li>Debian</li>
							<li>Ubuntu</li>
							<li><a href="http://www.theregister.co.uk/2013/09/12/google_mariadb_mysql_migration/">Google</a></li>
							<li><a href="http://blog.wikimedia.org/2013/04/22/wikipedia-adopts-mariadb/">Wikipedia</a></li>							
						</ul>	
					</section>

					<section>
						<h2>Compatibilidad</h2>
						<p><a href="https://mariadb.com/kb/en/mariadb/mariadb-vs-mysql-compatibility/">https://mariadb.com/kb/en/mariadb/mariadb-vs-mysql-compatibility/</a></p>	
					</section>

					<section>
						<h2 style="text-style: none">MariaDB</h2>
						<blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;...the simple truth is that there is no reason to use MySQL over MariaDB any more, while there are plenty of reasons to choose MariaDB.&rdquo;
						</blockquote>
						<p class="fragment"><small>Monty Widenius</small></p>
					</section>
				</section>

				<section>
					<section>
					<h2>Servidores web</h2>
						<p>
						   <img width="" height="" data-src="images/PHPWebServer.png" alt="PHP Web Servers">
						</p>
				    </section>

					<section>
						<h2>PHP FPM</h2>
							<ul>
								<li class="fragment">Fast CGI Process Manager</li>
								<li class="fragment">Puede correr multiples procesos PHP worker para servir peticiones Fast CGI</li>
								<li class="fragment">PHP > 5.4</li>
							</ul>
					</section>

					<section>
						<h2>Servicio PHP FPM</h2>
						<pre><code data-trim>
# apt-get install php5-fpm
# service php5-fpm restart
						</code></pre>						
					</section>

					<section>
						<h2>Porcentajes de uso</h2>
						<p>
						   <img width="" height="" data-src="images/webserver-marketshare.png" alt="Web Servers Market Share">
						</p>
				    </section>

				    <section>						
						<p>
						   <img width="" height="" data-src="images/webservers.png" alt="Web Servers by ranking">
						</p>
				    </section>

					<section>
						<h2>nginx</h2>
						<p>
						   Servidor Reverse Proxy, para los protocolos HTTP, HTTPS, SMTP, POP3 e IMAP, además de ser un balanceador de carga, HTTP cache y <strong>Servidor Web</strong>.
						</p>
				    </section>

				    <section>
						<h2>nginx</h2>
						<ul>
							<li class="fragment">Su desarrollo fue iniciado en 2002 por <strong>Igor Sysoev</strong></li>
							<li class="fragment">Desarrollado para servir HTTP dinámico usando <strong>FastCGI</strong>, SCGI como manejadores de scripts</li>
							<li class="fragment">Diseñado para hacerse cargo del "problema de los 10000".</li>
						</ul>
				    </section>

				    <section>						
						<p>
						   <img width="" height="" data-src="images/nginxphpfcgi.png" alt="nginx request">
						</p>
				    </section>

				    <section>
						<h2 style="text-style: none">nginx</h2>
						<blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
						&ldquo;The most important is that nginx is a reverse proxy first and HTTP server second, its first concern is not files but rather URLs, this changes the way we have to configure nginx.&rdquo;
						</blockquote>
						<p><small>de la documentación de nginx</small></p>
					</section>

					<section>
						<h2>Instalación</h2>
						<pre><code data-trim >
# apt-get install nginx
# service nginx start
						</code></pre>
					</section>

					<section>
						<h2>Configuración Básica</h2>
						<pre><code data-trim >
/etc/nginx/nginx.conf
/etc/nginx/sites-available/default
						</code></pre>
						<p>Configuración de PHP independiente del servidor web. (El servidor web sólo se comunica con PHP, <strong>no interpreta</strong>)</p>
						<pre><code data-trim >
/etc/php5/fpm/php.ini
						</code></pre>												
					</section>
				</section>

				<section>
					<section>
						<h2>Sistema Operativo</h2>
						<ul>
							<li class="fragment">Usa un SO de verdad</li>
							<li class="fragment">¿En qué Sistema Operativo se ejecuta tu software?</li>
							<li class="fragment">Mantente “cerca” de producción</li>
						</ul>
					</section>

					<section>
						<h2>Linux</h2>
						<ul>
							<li class="fragment">Máquinas virtales</li>
							<li class="fragment">Vagrant?</li>
							<li class="fragment">Linux containers , LXC (kernel >= 3.8)
								<ul class="fragment">
									<li><a href="https://pantheon.io/blog/why-we-built-pantheon-containers-instead-virtual-machines">Phanteon</a></li>
									<li><a href="https://platform.sh/blog/containers-are-the-new-static-binaries/">Platform.sh</a></li>
									<li>...</li>
								</ul>
							</li>
						</ul>
					</section>
				</section>

				<section>
					<section data-background="#ffffff">	
						<p>
						   <img width="" height="" data-src="images/DockerLogo.png" alt="Docker">
						</p>
					</section>

					<section>	
						<h2>Docker</h2>				
						<ul>
						   <li class="fragment">Linux Containers hechos fácil</li>
						   <li class="fragment">Escrito en lenguaje Go</li>
						   <li class="fragment"><a href="http://www.drupalcamp.cr/en/session/drupal-con-dockers-del-desarrollo-al-deploy">Drupal con Dockers del desarrollo al deploy</a></li>
						   <li class="fragment"><a href="http://drupalcampcr2015.digitalizate.mx">http://drupalcampcr2015.digitalizate.mx</a></li>
						</ul>
					</section>	
				</section>

				<section>
					<h2>Referencias</h2>
						<ul>
							<li><a href="http://talks.php.net/oscon15">http://talks.php.net/oscon15</a></li>
							<li><a href="http://talks.php.net/show/phpdaymx13/">http://talks.php.net/show/phpdaymx13/</a></li>
							<li><a href="http://www.youtube.com/watch?v=pzKrEmO8nEA"></a>Una vision general de PHP </li>
							<li><a href="http://www.youtube.com/watch?v=GwRD7cCCh6M"></a>NGINx: origen, evolución y futuro </li>
							<li><a href="https://anturis.com/blog/nginx-vs-apache/">https://anturis.com/blog/nginx-vs-apache/</a></li>
							<li><a href="http://www.freelock.com/blog/john-locke/2015-07/drupal-docker-pinch-salt">http://www.freelock.com/blog/john-locke/2015-07/drupal-docker-pinch-salt</a></li>
						</ul>
				</section>

				<section>
					<h2>Gracias</h2>
						<p><small>@betoscopio</small></p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
